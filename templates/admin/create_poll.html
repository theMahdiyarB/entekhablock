{% extends "base.html" %}

{% block title %}Ø§ÛŒØ¬Ø§Ø¯ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø¬Ø¯ÛŒØ¯ - Ù…Ø¯ÛŒØ±ÛŒØª{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
{% endblock %}

{% block content %}
<div class="admin-layout">
    <!-- Sidebar -->
    <aside class="admin-sidebar">
        <div class="admin-logo">
            <span class="logo-icon">ğŸ› ï¸</span>
            <span class="logo-text">Ù…Ø¯ÛŒØ±ÛŒØª</span>
        </div>
        <nav class="admin-nav">
            <a href="{{ url_for('admin_dashboard') }}" class="nav-link">
                ğŸ“Š Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
            </a>
            <a href="{{ url_for('admin_create_poll') }}" class="nav-link active">
                â• Ø§ÛŒØ¬Ø§Ø¯ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ
            </a>
            <a href="{{ url_for('view_blockchain') }}" class="nav-link">
                â›“ï¸ Ø¨Ù„Ø§Ú©Ú†ÛŒÙ†
            </a>
            <div style="margin-top: auto; padding-top: 32px;">
                <a href="{{ url_for('admin_logout') }}" class="nav-link" style="color: var(--m3-error);">
                    ğŸšª Ø®Ø±ÙˆØ¬
                </a>
            </div>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="admin-main">
        <header class="admin-header">
            <div>
                <a href="{{ url_for('admin_dashboard') }}"
                    style="text-decoration: none; color: var(--m3-primary); font-size: 14px; display: inline-block; margin-bottom: 16px;">â†
                    Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</a>
                <h1>Ø§ÛŒØ¬Ø§Ø¯ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø¬Ø¯ÛŒØ¯</h1>
                <p>ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ùˆ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø±Ø§ Ø¯Ø± Ø§ÛŒÙ† Ø¨Ø®Ø´ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</p>
            </div>
        </header>

        <form action="{{ url_for('admin_create_poll') }}" method="POST" class="admin-card"
            style="margin: 0; max-width: 100%;">
            <section class="form-section">
                <h3 class="title-large" style="margin-bottom: 24px;">Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§ÛŒÙ‡</h3>
                <div class="form-group">
                    <label class="form-label" for="title">Ø¹Ù†ÙˆØ§Ù† Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ</label>
                    <input type="text" id="title" name="title" class="form-input" required
                        placeholder="Ù…Ø«Ø§Ù„: Ø§Ù†ØªØ®Ø§Ø¨Ø§Øª Ø´ÙˆØ±Ø§ÛŒ ØµÙ†ÙÛŒ Û±Û´Û°Û³">
                </div>
                <div class="form-group">
                    <label class="form-label" for="description">ØªÙˆØ¶ÛŒØ­Ø§Øª</label>
                    <textarea id="description" name="description" class="form-textarea" rows="4"
                        placeholder="Ø¬Ø²Ø¦ÛŒØ§Øª Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø±Ø§ Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..."></textarea>
                </div>
            </section>

            <section class="form-section" style="margin-top: 48px;">
                <h3 class="title-large" style="margin-bottom: 24px;">Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                    <div class="form-group">
                        <label class="form-label" for="start_date">ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹</label>
                        <input type="date" id="start_date" name="start_date" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="end_date">ØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù†</label>
                        <input type="date" id="end_date" name="end_date" class="form-input" required>
                    </div>
                </div>
            </section>

            <section class="form-section" style="margin-top: 48px;">
                <h3 class="title-large" style="margin-bottom: 24px;">Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø±Ø£ÛŒâ€ŒÚ¯ÛŒØ±ÛŒ</h3>
                <div id="options-container">
                    <div class="form-group" style="display: flex; gap: 12px; margin-bottom: 12px;">
                        <input type="text" name="options[]" class="form-input" required placeholder="Ú¯Ø²ÛŒÙ†Ù‡ Û±">
                    </div>
                    <div class="form-group" style="display: flex; gap: 12px; margin-bottom: 12px;">
                        <input type="text" name="options[]" class="form-input" required placeholder="Ú¯Ø²ÛŒÙ†Ù‡ Û²">
                    </div>
                </div>
                <button type="button" class="btn btn-outlined" id="add-option" style="margin-top: 8px;">
                    â• Ø§ÙØ²ÙˆØ¯Ù† Ú¯Ø²ÛŒÙ†Ù‡ Ø¯ÛŒÚ¯Ø±
                </button>
            </section>

            <section class="form-section"
                style="margin-top: 48px; padding-top: 32px; border-top: 1px solid var(--m3-outline-variant); display: flex; justify-content: flex-end; gap: 16px;">
                <a href="{{ url_for('admin_dashboard') }}" class="btn btn-text">Ø§Ù†ØµØ±Ø§Ù</a>
                <button type="submit" class="btn btn-filled">Ø§ÛŒØ¬Ø§Ø¯ Ùˆ Ø§Ù†ØªØ´Ø§Ø± Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ</button>
            </section>
        </form>
    </main>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.getElementById('add-option').addEventListener('click', function () {
        const container = document.getElementById('options-container');
        const count = container.children.length + 1;
        const div = document.createElement('div');
        div.className = 'form-group';
        div.style.display = 'flex';
        div.style.gap = '12px';
        div.style.marginBottom = '12px';
        div.innerHTML = `<input type="text" name="options[]" class="form-input" required placeholder="Ú¯Ø²ÛŒÙ†Ù‡ ${count}">`;
        container.appendChild(div);
    });
</script>
{% endblock %}